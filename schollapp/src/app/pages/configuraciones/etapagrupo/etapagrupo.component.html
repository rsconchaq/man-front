<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0">Asignar Grupo a Etapa</h5>
    <button class="btn btn-primary" (click)="guardar()" [disabled]="listaGrupos.length === 0">
      <i class="ri-save-line me-1"></i>
      Guardar Cambios
    </button>
  </div>
  <div class="card-body">
    <form class="row mb-3">
      <div class="col-md-6">
        <label for="localSelect" class="form-label">Local <span class="text-danger">*</span></label>
        <select 
          id="localSelect" 
          class="form-select form-control-sm"
          [(ngModel)]="selectedLocalId"
          name="localSelect"
          (change)="onLocalChange($event)">
          <option value="">Seleccione un local</option>
          <option *ngFor="let local of locales" [value]="local.id">
            {{ local.descripcion }}
          </option>
        </select>
      </div>
      <div class="col-md-6">
        <label for="etapaSelect" class="form-label">Etapa <span class="text-danger">*</span></label>
        <select 
          id="etapaSelect" 
          class="form-select" 
          [(ngModel)]="selectedEtapaId"
          name="etapaSelect"
          (change)="onEtapaChange($event)"
          [disabled]="!selectedLocalId">
          <option value="">Seleccione una etapa</option>
          <option *ngFor="let etapa of etapasFiltradas" [value]="etapa.id">
            {{ etapa.descripcionEtapa }}
          </option>
        </select>
      </div>
    </form>
    <hr />
    <div class="row">
      <div class="col-md-12">
        <app-dual-listbox
          [availableItems]="availableGroups"
          [selectedItems]="selectedGroups"
          [key]="'idGrupo'"
          [display]="'descripcionGrupo'"
          [showSearchBox]="true"
          [height]="'350px'"
          (selectionChange)="onSelectionChange($event)">
        </app-dual-listbox>
      </div>
    </div>
  </div>
</div>
